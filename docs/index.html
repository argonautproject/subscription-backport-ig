<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE HTML>
<html xml:lang="en" xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
    <title>HL7.FHIR.UV.SUBSCRIPTIONS-BACKPORT\Home - FHIR v4.1.0</title>

    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta name="author" content="http://hl7.org/fhir"/>

    <link rel="stylesheet" href="fhir.css"/>

      <!-- Bootstrap core CSS -->
    <link rel="stylesheet" href="assets/css/bootstrap-fhir.css"/>

      <!-- Project extras -->
    <link rel="stylesheet" href="assets/css/project.css"/>
    <link rel="stylesheet" href="assets/css/pygments-manni.css"/>
    <link rel="stylesheet" href="assets/css/jquery-ui.css"/>
  	<link rel="stylesheet" href="assets/css/prism.css"/>
      <!-- Placeholder for child template CSS declarations -->
    <link rel="stylesheet" href="assets/css/hl7.css"/>
    <link rel="stylesheet" href="assets/css/fhir.css"/>

    <script src="fhir-table-scripts.js" type="text/javascript"> </script>

      <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
      <!-- [if lt IE 9]>
    <script src="assets/js/html5shiv.js"></script>
    <script src="assets/js/respond.min.js"></script>
    <![endif] -->

      <!-- Favicons -->
    <link sizes="144x144" rel="apple-touch-icon-precomposed" href="assets/ico/apple-touch-icon-144-precomposed.png"/>
    <link sizes="114x114" rel="apple-touch-icon-precomposed" href="assets/ico/apple-touch-icon-114-precomposed.png"/>
    <link sizes="72x72" rel="apple-touch-icon-precomposed" href="assets/ico/apple-touch-icon-72-precomposed.png"/>
    <link rel="apple-touch-icon-precomposed" href="assets/ico/apple-touch-icon-57-precomposed.png"/>
    <link rel="shortcut icon" href="assets/ico/favicon.png"/>
  </head>
  <body onload="document.body.style.opacity='1'">

	  <script src="assets/js/prism.js"></script>

    <style type="text/css">h2{--heading-prefix:"1"}
    h3,h4,h5,h6{--heading-prefix:"1"}</style>
    <div id="segment-header" class="segment">    <!-- segment-header -->
      <div class="container">    <!-- container -->
          <!-- Placeholder for child template header declarations -->

        <div id="hl7-nav">
          <a no-external="true" id="hl7-logo" href="http://hl7.org">
            <img src="assets/images/hl7-logo-header.png" alt="Visit the HL7 website" height="50"/>
          </a>
        </div>
        <div id="family-nav">
          <a no-external="true" id="family-logo" href="http://hl7.org/fhir"><img src="assets/images/fhir-logo-www.png" alt="Visit the FHIR website" height="50"/> </a>
        </div>
        <div id="hl7-search">
          <a no-external="true" id="hl7-search-lnk" href="searchform.html"><img src="assets/images/search.png" alt="Search FHIR"/></a>
        </div>


        <div id="ig-status">
          <p><span style="font-size:12pt;font-weight:bold">Subscriptions R5 Backport</span><br/>0.1.0 - ballot</p>
        </div>
      </div>   <!-- /container -->
    </div>    <!-- /segment-header -->

    <div id="segment-navbar" class="segment">    <!-- segment-navbar -->
      <div id="stripe"> </div>
      <div class="container">    <!-- container -->
          <!-- HEADER CONTENT -->

        <nav class="navbar navbar-inverse">
            <!-- status-bar -->
          <div class="container">
            <button data-target=".navbar-inverse-collapse" data-toggle="collapse" type="button" class="navbar-toggle">
              <span class="icon-bar"> </span>
              <span class="icon-bar"> </span>
              <span class="icon-bar"> </span>
            </button>
            <a href="http://build.fhir.org/index.html" class="navbar-brand hidden">FHIR</a>
            <div class="nav-collapse collapse navbar-inverse-collapse">
                <!-- menu.xml -->

<ul class="nav navbar-nav">
  <li>
    <a href="toc.html">Contents</a>
  </li>
  <li>
    <a href="index.html">Home</a>
  </li>
  <li class="dropdown">
    <a data-toggle="dropdown" href="#" class="dropdown-toggle">Specification
      <b class="caret"></b>
    </a>
    <ul class="dropdown-menu">
      <li>
        <a href="actors.html">Actors</a>
      </li>
      <li>
        <a href="components.html">Topic-Based Subscription Components</a>
      </li>
      <li>
        <a href="workflow.html">Workflow</a>
      </li>
      <li>
        <a href="channels.html">Channels</a>
      </li>
      <li>
        <a href="notifications.html">Notifications</a>
      </li>
      <li>
        <a href="payloads.html">Payload Types</a>
      </li>
      <li>
        <a href="conformance.html">Conformance</a>
      </li>
      <li>
        <a href="errors.html">Handling Errors</a>
      </li>
    </ul>
  </li>
  <li>
    <a href="safety_security.html">Safety and Security</a>
  </li>
  <li class="dropdown">
    <a data-toggle="dropdown" href="#" class="dropdown-toggle">Artifacts
      <b class="caret"></b>
    </a>
    <ul class="dropdown-menu">
      <li>
        <a href="artifacts.html#1">Capability Statements</a>
      </li>
      <li>
        <a href="artifacts.html#2">Operations</a>
      </li>
      <li>
        <a href="artifacts.html#3">Profiles</a>
      </li>
      <li>
        <a href="artifacts.html#4">Extensions</a>
      </li>
      <li>
        <a href="artifacts.html#5">Value Sets</a>
      </li>
      <li>
        <a href="artifacts.html#7">Examples</a>
      </li>
    </ul>
  </li>
  <li>
    <a href="downloads.html">Downloads</a>
  </li>
</ul>
            </div>    <!-- /.nav-collapse -->
          </div>    <!-- /.container -->
        </nav>    <!-- /.navbar -->
        <!-- /HEADER CONTENT -->
      </div>    <!-- /container -->
    </div>    <!-- /segment-navbar -->
      <!-- status-bar -->

    <div id="segment-breadcrumb" class="segment">    <!-- segment-breadcrumb -->
      <div class="container">    <!-- container -->
        <ul class="breadcrumb">
          <li><a href="toc.html"><b>Table of Contents</b></a></li><li><b>Home</b></li>

        </ul>
      </div>    <!-- /container -->
    </div>    <!-- /segment-breadcrumb -->

    <a name="top"> </a>
    <div id="segment-content" class="segment">    <!-- segment-content -->
      <div class="container">    <!-- container -->
        <div class="row">
          <div class="inner-wrapper">

<style type="text/css">
h2:before{color:silver;counter-increment:section;content:var(--heading-prefix) " ";}
h3:before{color:silver;counter-increment:sub-section;content:var(--heading-prefix) "." counter(sub-section) " ";}
h4:before{color:silver;counter-increment:composite;content:var(--heading-prefix) "." counter(sub-section) "." counter(composite) " ";}
h5:before{color:silver;counter-increment:detail;content:var(--heading-prefix) "." counter(sub-section) "." counter(composite) "." counter(detail) " ";}
h6:before{color:silver;counter-increment:more-detail;content:var(--heading-prefix) "." counter(sub-section) "." counter(composite) "." counter(detail) "." counter(more-detail)" ";}
</style>
<div class="col-12">
    <!-- ReleaseHeader --><p id="publish-box">Subscriptions R5 Backport - Local Development build (v0.1.0). See the <a href="http://hl7.org/fhir/uv/subscriptions-backport/history.html">Directory of published versions</a></p>  <!-- EndReleaseHeader -->
  <h2>Home</h2>
  









    <p>  <!-- white space is critical inside of capture --></p>
<div class="markdown-toc">
<ul id="markdown-toc">
  <li><a href="#about-this-guide" id="markdown-toc-about-this-guide">About This Guide</a></li>
  <li><a href="#what-are-subscriptions" id="markdown-toc-what-are-subscriptions">What are Subscriptions?</a></li>
  <li><a href="#query-defined-subscriptions-dstu2---r4" id="markdown-toc-query-defined-subscriptions-dstu2---r4">Query-Defined Subscriptions (DSTU2 - R4)</a></li>
  <li><a href="#topic-based-subscriptions---r5-and-later" id="markdown-toc-topic-based-subscriptions---r5-and-later">Topic-Based Subscriptions - R5 and Later</a></li>
  <li><a href="#topic-based-subscriptions---r4b-and-later" id="markdown-toc-topic-based-subscriptions---r4b-and-later">Topic-Based Subscriptions - R4B and Later</a></li>
  <li><a href="#boundaries-and-relationships" id="markdown-toc-boundaries-and-relationships">Boundaries and Relationships</a></li>
  <li><a href="#authors-and-contributors" id="markdown-toc-authors-and-contributors">Authors and Contributors</a></li>
</ul>

</div>
<p>The Subscription R5 Backport Implementation Guide enables servers running verions of FHIR earlier than R5 to implement a subset of R5 Subscriptions in a standardized way.</p>

<h3 id="about-this-guide">About This Guide</h3>

<p>During the development of FHIR R5, the Subscriptions Framework has gone through a significant redesign.  Many implementers have expressed a need for functionality from the FHIR R5 version of Subscriptions to be made available in FHIR R4.</p>

<p>The goal of publishing this guide is to define a standard method of back-porting the R5 Subscriptions Framework for greater compatibility and adoption.</p>

<h3 id="what-are-subscriptions">What are Subscriptions?</h3>

<p>The Subscriptions Framework is a mechanism designed to allow clients to ask for notifications when data changes.  It is an active notification system; a FHIR server actively sends notifications to clients as changes occur.</p>

<h3 id="query-defined-subscriptions-dstu2---r4">Query-Defined Subscriptions (DSTU2 - R4)</h3>

<p>There is a defined <a href="http://hl7.org/fhir/r4/subscription.html">Subscription</a> resource in FHIR R4, which has been in place since DSTU2.  In those releases of FHIR, subscriptions are defined by a client dynamically by posting a Subscription resource with a criteria string. The FHIR server must then run a query against that criteria and track the query result-set for each subscription request.  Each time a change to the server’s data is made, a server must re-run the query and send notifications to clients if their result-set changes (e.g., a new entry is added or removed).</p>

<p>The above approach works well for some use cases, but has issues which prevent it from being used in others.  Some of the issues identified include:</p>
<ul>
  <li>Difficulty implementing the server-side logic at scale (both in terms of large datasets and many clients).</li>
  <li>An opaque discovery process (e.g., servers that had restrictions on queries had no way to advertise them).</li>
  <li>Lack of granularity in events (e.g., it was unclear why something was removed from a dataset).</li>
  <li>No ability to bundle notifications (e.g., servers had to send a single notification for each discrete event).</li>
  <li>Notifications required clients to re-query after receiving a notification.</li>
</ul>

<p>While some of the issues would be addressable with modifications to the existing <code class="language-plaintext highlighter-rouge">Subscription</code> resource, the FHIR Infrastructure Work Group felt that more extensive changes were needed, and so started a redesign of Subscriptions for R5.</p>

<h3 id="topic-based-subscriptions---r5-and-later">Topic-Based Subscriptions - R5 and Later</h3>

<p>More than a year of focused work resulted in a new design for Subscriptions in FHIR.  The redesign focused on three main areas:</p>

<ol>
  <li>Moving to a topic-based model, with the defintion of a <code class="language-plaintext highlighter-rouge">SubscriptionTopic</code> resource.</li>
  <li>Changing the <code class="language-plaintext highlighter-rouge">Subscription</code> resource to add clarity and flexibility.</li>
  <li>Restructuring notifications by adding a new <code class="language-plaintext highlighter-rouge">Bundle</code> type.</li>
</ol>

<p>The implementer response to these changes has been overwhelmingly positive - changes to the mechanism address the issues identified and retain all of the existing functionality.  However, many of the changes cannot be made to the FHIR specifications until the release of R5.  Implementers have expressed concern that the publication and adoption of FHIR R5 are too far in the future.</p>

<h3 id="topic-based-subscriptions---r4b-and-later">Topic-Based Subscriptions - R4B and Later</h3>

<p>In order to provide topic-based subscription support in FHIR R4, this Implementation Guide supplements additions made to FHIR R4B to support the new FHIR R5 topic-based subscriptions.  Wherever possible, this guide tries to align with FHIR R5 to lower implementer burden, however some differences are unavoidable.</p>

<h3 id="boundaries-and-relationships">Boundaries and Relationships</h3>

<h4 id="relation-to-fhircast">Relation to FHIRcast</h4>

<p><a href="http://fhircast.org">FHIRcast</a> is a framework for user-activity synchronization across applications.  FHIRcast and Subscription are both conceptually based <a href="https://www.w3.org/TR/websub/">W3 WebSub</a>, and while the mechanics of two projects look similar, they are fundamentally different projects used to address different use cases.  In particular:</p>

<ol>
  <li>What Is Communicated
    <ul>
      <li>FHIRcast is primarily concerned with context syncrhonization.</li>
      <li>Subscriptions are focused on content synchonization.</li>
    </ul>
  </li>
  <li>User Interaction
    <ul>
      <li>FHIRcast is designed to be used by multiple applications perhaps with the same user and typically on the same device.</li>
      <li>Subscriptions are designed to be used by multiple distinct systems, often outside of a user workflow.</li>
    </ul>
  </li>
  <li>Session Duration
    <ul>
      <li>FHIRcast is designed around short-lived sessions.</li>
      <li>Subscriptions are intented to be long-lived resources.</li>
    </ul>
  </li>
  <li>Event Frequency
    <ul>
      <li>FHIRcast sends only single-event notifications.</li>
      <li>Subscriptions allow servers to batch multiple notifications in high-frequency scenarios.</li>
    </ul>
  </li>
</ol>

<h4 id="relation-to-fhir-messaging">Relation to FHIR Messaging</h4>

<p>FHIR <a href="http://hl7.org/fhir/messaging.html">Messaging</a> is a message-based protocol which can be used for communication. When combining Messaging and Subscriptions, complete notifications are wrapped into Messaging Bundles.  More details are provided on the <a href="channels.html#fhir-messaging">channels page</a>.</p>

<h3 id="authors-and-contributors">Authors and Contributors</h3>

<table class="grid">
  <thead>
    <tr>
      <th><strong>Role</strong></th>
      <th><strong>Name</strong></th>
      <th><strong>Organization</strong></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Author</td>
      <td>Gino Canessa</td>
      <td>Microsoft</td>
    </tr>
    <tr>
      <td>Contributor</td>
      <td>Eric Haas</td>
      <td>Health eData</td>
    </tr>
    <tr>
      <td>Contributor</td>
      <td>Josh Mandel</td>
      <td>Microsoft / SMART Health IT</td>
    </tr>
    <tr>
      <td>Contributor</td>
      <td>Adam Strickland</td>
      <td>Epic</td>
    </tr>
    <tr>
      <td>Contributor</td>
      <td>Jason Vogt</td>
      <td>Meditech</td>
    </tr>
  </tbody>
</table>

<p>The authors gratefully acknowledge the many contributions from numerous users and facilitators who helped shape, mature, debug, and advance Topic-Based Subscriptions:</p>

<p>Avery Allen,
Steve Atwood,
Rick Geimer,
Grahame Grieve,
Bas van den Heuvel,
Spencer LaGesse,
Brett Marquard,
Lloyd McKenzie,
John Moehrke,
Vassil Peytchev,
Pascal Pfiffner,
David Pyke,
René Spronk,
Jenni Syed,
Isaac Vetter,
and
Julie Winters</p>

<p>The authors apologize if they have omitted any contributor from this list.</p>



</div>
        </div>    <!-- /inner-wrapper -->
      </div>    <!-- /row -->
    </div>    <!-- /container -->
  </div>    <!-- /segment-content -->

  <script src="assets/js/jquery.js" type="text/javascript"> </script>       <!-- note keep space here, otherwise it will be transformed to empty tag -> fails -->
  <script src="assets/js/jquery-ui.min.js" type="text/javascript"> </script>

  <script type="text/javascript">
    $(document).ready(function(){
      if(window.location.hash != "") {
          $('a[href="' + window.location.hash + '"]').click()
      }
    });
  </script>
  <a name="bottom"> </a>
  <div igtool="footer" id="segment-footer" class="segment">    <!-- segment-footer -->
    <div class="container">    <!-- container -->

      <div class="inner-wrapper">
        <p><a name="f000f2d2-aac8-463d-8e4e-252f8e553aa6">​</a>
          IG &copy; 2020+ <a style="color:var(--footer-hyperlink-text-color)" href="https://hl7.org/Special/committees/fiwg/index.cfm">HL7 FHIR Infrastructure WG</a>.  Package hl7.fhir.uv.subscriptions-backport#0.1.0 based on <a style="color: var(--footer-hyperlink-text-color)" href="http://build.fhir.org/">FHIR 4.1.0</a>. Generated <span title="Tue, Nov 9, 2021 15:02-0600">2021-11-09</span>
          <br/>
          <span style="color: var(--footer-highlight-text-color)"></span>
                      Links: <a style="color: var(--footer-hyperlink-text-color)" href="toc.html">Table of Contents</a> |
                 <a style="color: var(--footer-hyperlink-text-color)" href="qa.html">QA Report</a>
                 
                
               | <a style="color: #81BEF7" href="http://hl7.org/fhir/uv/subscriptions-backport/history.html" target="_blank">Version History  |
               <a style="color: #81BEF7" href="searchform.html" target="_blank">Search  |
                 <a rel="license" style="color: #81BEF7" href="http://build.fhir.org/license.html"><img src="cc0.png" alt="CC0" style="border-style: none;"/></a> |
                   <!-- <a style="color: #81BEF7" href="todo.html">Search</a> | --> 
                 <a style="color: #81BEF7" href="http://hl7.org/fhir-issues" target="_blank">Propose a change </a>

          
        
          <!-- /inner-wrapper -->
        <!-- /container -->
      <!-- /segment-footer -->
  
  <div id="segment-post-footer" class="segment hidden">    <!-- segment-post-footer -->
    <div class="container">    <!-- container -->
    </div>    <!-- /container -->
  </div>    <!-- /segment-post-footer -->
  
    <!-- JS and analytics only. -->
    <!-- Bootstrap core JavaScript
  ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
  <script src="assets/js/bootstrap.min.js" type="text/javascript"> </script>
  <script src="assets/js/respond.min.js" type="text/javascript"> </script>
  <script src="assets/js/anchor.min.js" type="text/javascript"> </script>
  <script>anchors.options.visible = 'hover'
anchors.add()</script>
  
  <!-- feedback form - Google forms -->
  <!-- v0.1, 2021-01-09 -->



  <!-- / feedback form -->

    <!-- Analytics Below
  ================================================== -->
  


</a></a></p></div></div></div></body></html>